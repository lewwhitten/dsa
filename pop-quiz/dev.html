<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pop-Cue Classroom Tool — Find the Slope</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #f5f7fa;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    /* ==== EXPECTATIONS BAR ==== */
    #expectations {
      color: #cc0000;
      text-align: center;
      margin-bottom: 12px;
      font-weight: 600;
      font-size: 1.05em;
      line-height: 1.35;
    }

    /* ==== TWO-COLUMN LAYOUT ==== */
    #layout { border-collapse: separate; border-spacing: 40px; }
    #layout td { vertical-align: middle; }

    /* ==== LEFT: Notes + POP + options ==== */
    #popBlock { text-align: center; min-width: 280px; }
    .recall {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 10px 12px;
      margin-bottom: 10px;
      font-size: 0.95em;
      line-height: 1.35;
      box-shadow: 0 4px 12px rgba(0,0,0,.06);
    }
    .recall b { color:#111827; }

    .opts {
      text-align:left;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:10px;
      padding:10px 12px;
      margin: 0 auto 10px;
      width: 220px;
      font-size: 0.9em;
      box-shadow: 0 4px 12px rgba(0,0,0,.06);
    }
    .opts label { display:flex; align-items:center; gap:8px; margin:6px 0; cursor:pointer; }
    .opts input[type="checkbox"] { transform: translateY(1px); }

    #popper {
      width: 200px; height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffcc00, #ff9900);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      display: flex; align-items: center; justify-content: center;
      font-size: 2em; color: white; cursor: pointer;
      user-select: none;
      transition: transform 0.05s, background 0.3s;
      margin: 10px auto 12px;
    }
    #popper:active { transform: scale(0.92); }
    #counter { font-size: 1.05em; margin-bottom: 8px; font-weight: 600; }
    button {
      padding: 6px 12px; border: none; border-radius: 6px;
      background: #0077cc; color: #fff; cursor: pointer;
    }
    button:hover { background: #005fa3; }

    /* ==== RIGHT: PROBLEMS ==== */
    #problemBlock { min-width: 380px; text-align: center; }
    h1 { margin: 0 0 10px; color: #333; font-weight: 600; }

    .table-box {
      margin: 0 auto;
      width: clamp(320px, 52vw, 720px);
      aspect-ratio: 4 / 3;
      background: #ffffff;
      border: 10px solid #222;
      border-radius: 18px;
      position: relative;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
    }

    .spot {
      position: absolute;
      max-width: 44%;
      text-align: center;
      line-height: 1.2;
      padding: 8px 10px;
      border-radius: 10px;
      font-size: clamp(20px, 3vw, 34px);
      background: #fffdf8;
      border: 1px solid #f0e6c7;
      box-shadow: 0 4px 12px rgba(0,0,0,.06);
      font-variant-numeric: tabular-nums;
    }
    .L1 { left: 10px;  top: 22%; transform: translateY(-50%); }
    .L2 { left: 10px;  top: 78%; transform: translateY(-50%); }
    .R1 { right: 10px; top: 22%; transform: translateY(-50%); }
    .R2 { right: 10px; top: 78%; transform: translateY(-50%); }

    @media (max-width: 800px) {
      #layout { border-spacing: 20px; }
      #popper { width: 160px; height: 160px; }
      .spot { font-size: clamp(18px, 4vw, 28px); }
    }

    footer { margin-top: 18px; color:#555; font-weight:700; text-align:center; }
  </style>
</head>
<body>

  <div id="expectations">
    Mr. Bellezas &amp; Whitten Expectations:<br>
    No talking or glancing at neighbor’s whiteboard.<br>
    A <strong>Pop</strong> = <strong>MBI</strong> and <strong>zero quiz score</strong>.<br>
    Hold your board up for collection when done!
  </div>

  <table id="layout">
    <tr>
      <!-- LEFT: Notes + options + POP -->
      <td id="popBlock">
        <div class="recall">
          <b>Recall:</b> (x₁, y₁) and (x₂, y₂) &nbsp;&nbsp;;&nbsp;&nbsp;
          <b>m</b> = (y₂ − y₁) / (x₂ − x₁)
        </div>

        <div class="opts">
          <label><input type="checkbox" id="optNeg"> Allow negatives (−9…9)</label>
          <label><input type="checkbox" id="optVert"> Include vertical lines (x₂ = x₁)</label>
          <label><input type="checkbox" id="optHorz"> Include horizontal lines (y₂ = y₁)</label>
        </div>

        <div id="popper">POP<br>QUIZ!</div>
        <div id="counter">Pops: 0</div>
        <button id="resetBtn">Reset / New Problems</button>
        <audio id="popSound" src="pop.mp3" preload="auto"></audio>
      </td>

      <!-- RIGHT: Four slope problems -->
      <td id="problemBlock">
        <h1>Find the Slope (m)</h1>
        <div class="table-box" aria-label="Four slope problems, two on each long side">
          <div class="spot L1" id="pL1"></div>
          <div class="spot L2" id="pL2"></div>
          <div class="spot R1" id="pR1"></div>
          <div class="spot R2" id="pR2"></div>
        </div>
      </td>
    </tr>
  </table>

  <footer><br><br><br>Created by Del Sol Code Club</footer>

  <script>
    // === POP BUTTON LOGIC ===
    let count = 0;
    let isRed = false;
    const popper  = document.getElementById('popper');
    const counter = document.getElementById('counter');
    const sound   = document.getElementById('popSound');

    popper.addEventListener('click', async () => {
      count++;
      counter.textContent = 'Pops: ' + count;
      try { sound.currentTime = 0; await sound.play(); } catch (_) {}
      popper.style.background = isRed
        ? 'radial-gradient(circle at 30% 30%, #ffcc00, #ff9900)'
        : 'radial-gradient(circle at 30% 30%, #cc0000, #660000)';
      isRed = !isRed;
    });

    // === OPTIONS ===
    const optNeg  = document.getElementById('optNeg');
    const optVert = document.getElementById('optVert');
    const optHorz = document.getElementById('optHorz');

    // === PROBLEM SPOTS ===
    const elL1 = document.getElementById('pL1');
    const elL2 = document.getElementById('pL2');
    const elR1 = document.getElementById('pR1');
    const elR2 = document.getElementById('pR2');
    const resetBtn  = document.getElementById('resetBtn');

    function rInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

    function randomSlopeProblem() {
      const allowNeg   = optNeg.checked;
      const includeV   = optVert.checked; // allow x2==x1
      const includeH   = optHorz.checked; // allow y2==y1

      const min = allowNeg ? -9 : 0;
      const max = 9;

      let x1 = rInt(min, max), y1 = rInt(min, max);
      let x2 = rInt(min, max), y2 = rInt(min, max);

      // Avoid identical points
      while (x1 === x2 && y1 === y2) {
        x2 = rInt(min, max); y2 = rInt(min, max);
      }

      // Enforce vertical/horizontal inclusion preferences
      if (!includeV) {
        while (x2 === x1) { x2 = rInt(min, max); }
      }
      if (!includeH) {
        while (y2 === y1) { y2 = rInt(min, max); }
      }

      // Final guard in case both disallowed and we accidentally matched both at once
      if (!includeV && !includeH) {
        while ((x2 === x1) || (y2 === y1)) {
          x2 = rInt(min, max); y2 = rInt(min, max);
          if (x1 !== x2 && y1 !== y2) break;
        }
      }

      return `( ${x1}, ${y1} )   &   ( ${x2}, ${y2} )`;
    }

    function generateFour() {
      elL1.textContent = randomSlopeProblem();
      elL2.textContent = randomSlopeProblem();
      elR1.textContent = randomSlopeProblem();
      elR2.textContent = randomSlopeProblem();
    }

    function resetAll() {
      count = 0;
      counter.textContent = 'Pops: 0';
      generateFour();
    }

    resetBtn.addEventListener('click', resetAll);
    optNeg.addEventListener('change', generateFour);
    optVert.addEventListener('change', generateFour);
    optHorz.addEventListener('change', generateFour);

    // Initial render
    generateFour();
  </script>
</body>
</html>
